@import com.innovenso.townplanner.model.TownPlan
@import com.innovenso.townplanner.model.language.Element
@import com.innovenso.townplanner.io.model.NavigationContext
@import com.innovenso.townplanner.model.concepts.BusinessCapability
@import play.twirl.api.TwirlFeatureImports._
@import website.html.TagSection
@import com.innovenso.townplanner.model.concepts.ItSystem
@import com.innovenso.townplanner.model.concepts.ItContainer
@(element: Element, navigationContext: NavigationContext, townPlan: TownPlan)
<header>
    <hgroup>
        <h1>@element.title</h1>
        <h2> @element match {
          case businessCapability: BusinessCapability => {
              @element.modelComponentType.value
                  @if(townPlan.enterprise(businessCapability).nonEmpty) {
                    @defining(townPlan.enterprise(businessCapability).get) { enterprise =>
                      of <a href="@navigationContext.relativePathTo(enterprise)">@enterprise.title</a>
                    }
                  }
                  @if(townPlan.parentBusinessCapability(businessCapability).nonEmpty) {
                    @defining(townPlan.parentBusinessCapability(businessCapability).get) { cap =>
                        and part of <a href="@navigationContext.relativePathTo(cap)">@cap.title</a>
                    }
                  }
          }
          case itSystem: ItSystem => {
              @element.modelComponentType.value
                @if(townPlan.systemPlatform(itSystem).nonEmpty) {
                  @defining(townPlan.systemPlatform(itSystem).get) { platform =>
                    belonging to <a href="@navigationContext.relativePathTo(platform)">@platform.title</a>
                  }
                }
          }
          case itContainer: ItContainer => {
              @element.modelComponentType.value
              @if(townPlan.system(itContainer).nonEmpty) {
                  @defining(townPlan.system(itContainer).get) { system =>
                      belonging to <a href="@navigationContext.relativePathTo(system)">@system.title</a>
                  }
              }
          }
          case _ => {
              @element.modelComponentType.value
          }
        } @TagSection(element, townPlan)</h2>

    </hgroup>
</header>
